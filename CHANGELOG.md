# SaltGoat 更新日志

## [0.4.2] - 2025-01-21

### 🔧 修复和改进
- **磁盘监控修复**: 修复了`du`命令在Salt调用中的参数解析问题，现在可以正确显示目录大小统计
- **SSL证书生成优化**: 改进了证书生成函数的错误处理和权限检查，提高稳定性
- **监控PID显示修复**: 修复了服务监控中PID获取和显示逻辑，现在可以正确显示进程信息
- **系统维护功能优化**: 将系统更新检查改为直接使用`apt`命令，避免Salt超时问题

### 🐛 错误修复
- 修复了磁盘监控中`du: invalid option -- 'r'`和`du: invalid option -- '1'`错误
- 修复了SSL证书生成时的权限和错误处理问题
- 修复了监控功能中`error: list of process IDs must follow -p`错误
- 修复了系统更新检查超时问题

### 📦 技术改进
- 将部分Salt调用改为直接系统命令，提高性能和稳定性
- 优化了错误处理机制，提供更好的用户体验
- 改进了命令参数解析，避免Shell解析问题

---

## [0.4.1] - 2025-10-21

### 🔧 修复和改进
- **templates文件夹**: 重新创建了templates文件夹，用于存放自动化任务模板
- **文档完善**: 添加了templates文件夹的详细说明文档
- **功能验证**: 确认templates功能正常工作

### 📦 新增内容
- templates/README.md - 模板文件说明文档
- 支持自动化任务模板管理
- 完善的项目结构

### 🐛 错误修复
- 修复了templates文件夹被误删的问题
- 确保所有功能模块完整

---

## [0.4.0] - 2025-10-20

### 🚀 主要更新
- **性能优化**: 大幅提升SaltGoat运行速度，减少Salt调用次数
- **警告消除**: 修复了所有Salt警告和DeprecationWarning消息
- **用户体验**: 改进了命令输出格式和错误处理

### 🔧 修复和改进
- **状态检查**: 使用`systemctl`直接检查服务状态，避免Salt调用
- **数据库管理**: 优化MySQL数据库操作，使用直接命令替代Salt模块
- **服务管理**: 改进服务重启、启动、停止等操作
- **日志权限**: 修复Salt日志权限问题

### 📦 新增内容
- 支持Percona Server 8.4优化配置
- 改进的MySQL状态检查功能
- 优化的Valkey密码管理
- 完善的错误处理机制

### 🐛 错误修复
- 修复了Salt日志权限警告
- 修复了MySQL插件加载问题
- 修复了Valkey认证问题
- 修复了服务管理中的Salt警告

---

## [0.3.0] - 2025-10-19

### 🚀 主要更新
- **Web服务器**: 完整的Nginx 1.29.1 + ModSecurity v3编译安装
- **安全测试**: 全面的ModSecurity攻击测试和模拟器
- **Salt状态**: 完整的Salt状态文件管理

### 🔧 新增功能
- Nginx 1.29.1源码编译安装
- ModSecurity v3集成
- OWASP Core Rule Set (CRS)支持
- 完整的Web服务器Salt状态文件
- ModSecurity攻击测试脚本
- 安全威胁模拟器

### 📦 技术改进
- 支持动态模块加载
- 完整的SSL/TLS配置
- 优化的Nginx配置模板
- 系统服务管理

---

## [0.2.0] - 2025-10-18

### 🚀 主要更新
- **数据库管理**: 完整的MySQL/Percona支持
- **缓存系统**: Valkey (Redis兼容)集成
- **搜索引擎**: OpenSearch支持
- **消息队列**: RabbitMQ集成

### 🔧 新增功能
- MySQL/Percona数据库管理
- Valkey缓存系统
- OpenSearch搜索引擎
- RabbitMQ消息队列
- 数据库备份和恢复
- 性能监控

### 📦 技术改进
- 优化的数据库配置
- 完整的服务管理
- 监控和日志系统
- 自动化部署

---

## [0.1.0] - 2025-10-17

### 🚀 初始版本
- **基础框架**: SaltGoat核心功能
- **服务管理**: Nginx、PHP-FPM基础支持
- **Salt集成**: 完整的Salt状态管理
- **用户界面**: 命令行工具

### 🔧 核心功能
- Salt状态文件管理
- 基础服务安装和配置
- 命令行工具界面
- 日志和监控系统
- 配置文件管理

### 📦 技术特性
- 模块化设计
- Salt原生功能
- 自动化部署
- 错误处理机制
