# SaltGoat ç³»ç»Ÿç»´æŠ¤æ¨¡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ç³»ç»Ÿç»´æŠ¤æ¨¡å—æä¾›å…¨é¢çš„ç³»ç»Ÿç»´æŠ¤åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ›´æ–°ã€æœåŠ¡ç®¡ç†ã€æ—¥å¿—æ¸…ç†ã€å¤‡ä»½æ¢å¤ç­‰æ“ä½œã€‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬è¯­æ³•
```bash
saltgoat maintenance <operation> [options]
```

### æ”¯æŒçš„ç»´æŠ¤æ“ä½œ

| æ“ä½œ | æè¿° | åŠŸèƒ½ |
|------|------|------|
| `update` | ç³»ç»Ÿæ›´æ–° | æ£€æŸ¥ã€å‡çº§ã€æ¸…ç†ç³»ç»ŸåŒ… |
| `service` | æœåŠ¡ç®¡ç† | å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€é‡è½½æœåŠ¡ |
| `cleanup` | ç³»ç»Ÿæ¸…ç† | æ¸…ç†æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶ã€ç¼“å­˜ |
| `disk` | ç£ç›˜ç®¡ç† | ç£ç›˜ä½¿ç”¨åˆ†æã€å¤§æ–‡ä»¶æŸ¥æ‰¾ |
| `health` | å¥åº·æ£€æŸ¥ | ç³»ç»Ÿå¥åº·çŠ¶æ€æ£€æŸ¥ |

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### ç³»ç»Ÿæ›´æ–°
```bash
# æ£€æŸ¥ç³»ç»Ÿæ›´æ–°
saltgoat maintenance update check

# å‡çº§ç³»ç»ŸåŒ…
saltgoat maintenance update upgrade

# å®Œæ•´å‡çº§
saltgoat maintenance update dist-upgrade

# è‡ªåŠ¨æ¸…ç†
saltgoat maintenance update autoremove

# æ¸…ç†åŒ…ç¼“å­˜
saltgoat maintenance update clean
```

### æœåŠ¡ç®¡ç†
```bash
# é‡å¯æœåŠ¡
saltgoat maintenance service restart nginx

# å¯åŠ¨æœåŠ¡
saltgoat maintenance service start mysql

# åœæ­¢æœåŠ¡
saltgoat maintenance service stop php8.3-fpm

# é‡è½½é…ç½®
saltgoat maintenance service reload nginx

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
saltgoat maintenance service status nginx
```

### ç³»ç»Ÿæ¸…ç†
```bash
# æ¸…ç†ç³»ç»Ÿæ—¥å¿—
saltgoat maintenance cleanup logs

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
saltgoat maintenance cleanup temp

# æ¸…ç†åŒ…ç¼“å­˜
saltgoat maintenance cleanup cache

# æ¸…ç†ç”¨æˆ·ç¼“å­˜
saltgoat maintenance cleanup user-cache
```

### ç£ç›˜ç®¡ç†
```bash
# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
saltgoat maintenance disk usage

# æŸ¥æ‰¾å¤§æ–‡ä»¶
saltgoat maintenance disk find-large 100M

# æŸ¥æ‰¾å¤§ç›®å½•
saltgoat maintenance disk find-large-dirs 1G
```

### å¥åº·æ£€æŸ¥
```bash
# ç³»ç»Ÿå¥åº·æ£€æŸ¥
saltgoat maintenance health
```

## ğŸ”§ ç»´æŠ¤åŠŸèƒ½è¯¦è§£

### ç³»ç»Ÿæ›´æ–°åŠŸèƒ½
- **æ£€æŸ¥æ›´æ–°**: æ˜¾ç¤ºå¯ç”¨çš„ç³»ç»Ÿæ›´æ–°
- **å®‰å…¨æ›´æ–°**: ä¼˜å…ˆå®‰è£…å®‰å…¨è¡¥ä¸
- **ç‰ˆæœ¬é”å®š**: ä¿æŠ¤æ ¸å¿ƒè½¯ä»¶ç‰ˆæœ¬
- **è‡ªåŠ¨æ¸…ç†**: æ¸…ç†ä¸éœ€è¦çš„åŒ…

### æœåŠ¡ç®¡ç†åŠŸèƒ½
- **æœåŠ¡æ§åˆ¶**: å¯åŠ¨ã€åœæ­¢ã€é‡å¯æœåŠ¡
- **é…ç½®é‡è½½**: é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
- **çŠ¶æ€æ£€æŸ¥**: æŸ¥çœ‹æœåŠ¡è¿è¡ŒçŠ¶æ€
- **ä¾èµ–ç®¡ç†**: å¤„ç†æœåŠ¡ä¾èµ–å…³ç³»

### ç³»ç»Ÿæ¸…ç†åŠŸèƒ½
- **æ—¥å¿—æ¸…ç†**: æ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶
- **ä¸´æ—¶æ–‡ä»¶**: æ¸…ç†ç³»ç»Ÿä¸´æ—¶æ–‡ä»¶
- **ç¼“å­˜æ¸…ç†**: æ¸…ç†å„ç§ç¼“å­˜æ–‡ä»¶
- **ç©ºé—´å›æ”¶**: å›æ”¶ç£ç›˜ç©ºé—´

### ç£ç›˜ç®¡ç†åŠŸèƒ½
- **ä½¿ç”¨åˆ†æ**: åˆ†æç£ç›˜ä½¿ç”¨æƒ…å†µ
- **å¤§æ–‡ä»¶æŸ¥æ‰¾**: æŸ¥æ‰¾å ç”¨ç©ºé—´çš„å¤§æ–‡ä»¶
- **ç›®å½•åˆ†æ**: åˆ†æç›®å½•å¤§å°åˆ†å¸ƒ
- **ç©ºé—´ä¼˜åŒ–**: æä¾›ç©ºé—´ä¼˜åŒ–å»ºè®®

## ğŸ“Š ç»´æŠ¤æŠ¥å‘Š

### å¥åº·æ£€æŸ¥æŠ¥å‘Š
```
==========================================
ç³»ç»Ÿå¥åº·æ£€æŸ¥æŠ¥å‘Š
==========================================
[SUCCESS] ç³»ç»Ÿè¿è¡Œæ—¶é—´: 7å¤© 12å°æ—¶
[SUCCESS] å†…å­˜ä½¿ç”¨ç‡: 45%
[SUCCESS] ç£ç›˜ä½¿ç”¨ç‡: 60%
[WARNING] å‘ç° 3 ä¸ªæœåŠ¡éœ€è¦é‡å¯
[INFO] å»ºè®®è¿è¡Œ: saltgoat maintenance service restart <service>
==========================================
```

### æ›´æ–°æ£€æŸ¥æŠ¥å‘Š
```
==========================================
ç³»ç»Ÿæ›´æ–°æ£€æŸ¥
==========================================
[INFO] å‘ç° 6 ä¸ªå¯ç”¨æ›´æ–°
[INFO] å®‰å…¨æ›´æ–°: 3 ä¸ª
[INFO] åŠŸèƒ½æ›´æ–°: 3 ä¸ª
[INFO] å»ºè®®è¿è¡Œ: sudo apt update && sudo apt upgrade
==========================================
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
modules/maintenance/
â”œâ”€â”€ maintenance.sh          # ä¸»ç»´æŠ¤è„šæœ¬
â”œâ”€â”€ backup.sh              # å¤‡ä»½åŠŸèƒ½
â”œâ”€â”€ logs.sh                # æ—¥å¿—ç®¡ç†
â””â”€â”€ README.md              # æœ¬æ–‡æ¡£
```

## ğŸ”— ç›¸å…³åŠŸèƒ½

- **æ•…éšœè¯Šæ–­**: `saltgoat diagnose` - ç³»ç»Ÿæ•…éšœè¯Šæ–­
- **æ€§èƒ½åˆ†æ**: `saltgoat profile analyze` - æ€§èƒ½åˆ†æ
- **ç‰ˆæœ¬é”å®š**: `saltgoat version-lock` - ç‰ˆæœ¬ç®¡ç†

## ğŸ“ æ›´æ–°æ—¥å¿—

- **v0.5.7** - æ¨¡å—åŒ–é‡æ„ï¼Œå®Œå–„ç»´æŠ¤åŠŸèƒ½
- æ™ºèƒ½æ›´æ–°æ£€æŸ¥å’Œç‰ˆæœ¬ä¿æŠ¤
- æœåŠ¡ç®¡ç†å’Œå¥åº·æ£€æŸ¥
- ç³»ç»Ÿæ¸…ç†å’Œç£ç›˜ç®¡ç†
